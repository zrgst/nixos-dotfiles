# --- Input method (fix AltGr/tilde in Ghostty) ---
env = GTK_IM_MODULE,gtk-im-context-simple

# --- Prefer Wayland with sane fallbacks ---
env = QT_QPA_PLATFORM,wayland;xcb
#env = GDK_BACKEND,wayland,x11
env = CLUTTER_BACKEND,wayland
env = SDL_VIDEODRIVER,wayland,x11          # unset per-app if a game misbehaves

# --- Qt tweaks ---
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1   # (typo fixed)
env = QT_AUTO_SCREEN_SCALE_FACTOR,1

# --- Browsers / Electron on Wayland ---
env = MOZ_ENABLE_WAYLAND,1                    # Firefox
env = ELECTRON_OZONE_PLATFORM_HINT,auto       # Electron apps (Discord, VS Code, etc.)

env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = NVD_BACKEND,gbm

# --- Nice-to-haves (optional; enable only if installed) ---
env = __GL_SYNC_TO_VBLANK,0
env = __GL_MaxFramesAllowed,1

# --- Usability ---
env = GTK_USE_PORTAL,1                        # better file pickers/portals
env = QT_QPA_PLATFORMTHEME,qt5ct
env = GTK_THEME,Gruvbox-Material-Dark

# Nvidia
env = __GL_GSYNC_ALLOWED,1
env = __GL_VRR_ALLOWED,1
env = NVIDIA_GSYNC_ALLOWED,1
env = NVIDIA_VRR_ALLOWED,1

# warning: SDL_VIDEODRIVER='wayland' does not allow fallback, use 'wayland,x11' instead
